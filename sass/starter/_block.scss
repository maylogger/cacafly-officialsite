@mixin set-block-grid ($left-grid: $total_columns / 2, $right-grid: $total_columns / 2, $total-grid: $left-grid + $right-grid) {

  $left-columns: ($left-grid /  $total-grid) * $total_columns;
  $right-columns: ($right-grid /  $total-grid) * $total_columns;

  &.content-#{$left-grid}-image-#{$right-grid} {

    .block-content {
      @include span-columns($left-columns, $total_columns);
    }
    .block-image {
      @include span-columns($right-columns omega, $total_columns);
    }
  }

  &.image-#{$left-grid}-content-#{$right-grid} {
    .block-content {
      @include span-columns($right-columns omega, $total_columns);
    }
    .block-image {
      @include span-columns($left-columns, $total_columns);
    }
  }

}

.block {
  @include pie-clearfix;
  padding: rhythm(2) 0 rhythm(1);

  // &:nth-child(2n+1) {
  //   background-color: #f9f9f7;
  // }
  .block-header {
    @include trailer(2);
  }
  .block-title {
    @include trailer(.5);
  }
  .block-sub-title {
    @include leader(.5);
    @include pie-clearfix;
    @include trailer(.5);
    .sub-title {
      float: left;
      @include trailer(0);
      @include adjust-font-size-to(22px, 2);
    }
    .readmore {
      float: right;
      @include adjust-font-size-to(16px, 2);
    }
  }
  .block-headline {
    max-width: 35em;
    margin-left: auto;
    margin-right: auto;
    padding-left: 18px;
    padding-right: 18px;
    @include trailer(1);
    @include adjust-font-size-to(22px, 1.25);
    text-align: center;
    border-left: 3px solid rgba(black, .1);
    border-right: 3px solid rgba(black, .1);
  }
  .block-content {
    max-width: 45em;
    margin-left: auto;
    margin-right: auto;
    @include trailer(1);
    text-align: center; // for cacaFly
  }

  .block-image {
    @include trailer(2);
    img {
      margin: 0 auto;
      display: block;
    }
  }

  // 特殊排版區塊
  &.center {
    .headline {
      text-align: center;
      margin: 0 auto;
      max-width: 260px;
    }
  }

  &.contact {
    padding: 0;
    background-color: $color-orange;
  }

  @include at-breakpoint($pad) {
    padding: rhythm(2) 0 rhythm(1);
    .block-content {
      @include adjust-font-size-to(18px);
    }

    &.center {
      .headline {
        max-width: 440px;
      }
    }

    // 設定 block-content 與 block-image 的 layout
    @include set-block-grid(1, 1);
    @include set-block-grid(1, 2);
    @include set-block-grid(2, 1);

  } // end pad

  @include at-breakpoint($desktop) {
    padding: rhythm(3) 0 rhythm(2);
    .block-header {
      @include trailer(3);
    }
    &.center {
      .headline {
        max-width: 560px;
      }
    }

  } // end desktop

}


